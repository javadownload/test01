upload 폴더 생성

c:/upload    WebContent/upload


------upload.html---------------------

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Insert title here</title>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
</script>

</head>
<body>

<h2> file upload 1 (c:/upload)</h2>

<form action="./upload1.do" method="post" enctype="multipart/form-data">
  <label>name : <input type="text" name="name">  </label> <br>
  <label>첨부파일 : <input type="file" name="myfile" multiple="multiple" > </label> <br>
  <br>
  <input type="submit">
  <input type="reset">
</form>
<hr>
<h2> file upload 2 </h2>

<form action="./upload2.do" method="post" enctype="multipart/form-data">
  <label>name : <input type="text" name="name">  </label> <br>
  <label>첨부파일 : <input type="file" name="myfile" multiple="multiple"> </label> <br>
  <br>
  <input type="submit">
  <input type="reset">
</form>
</body>
</html>



---------------UploadServlet1 ---------------------------------

package servlet;

import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.Part;

@WebServlet("/upload1.do")
@MultipartConfig(location = "c:/upload",maxFileSize = 1024*1024*5)
public class UploadServlet1 extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
	protected void doPost(HttpServletRequest request, HttpServletResponse response) 
			                                         throws ServletException, IOException {
		System.out.println("/upload1.do  파일업로드처리");
		response.setContentType("text/html;charset=utf-8");
        request.setCharacterEncoding("utf-8"); 
        
        PrintWriter out  = response.getWriter();

        String name = request.getParameter("name");
       // String myfile = request.getParameter("myfile");
        
        Collection<Part> parts = request.getParts();
        for(Part p :parts) {
        	if(p.getContentType() != null) {
        		String filename = p.getSubmittedFileName();
        		if(filename != null && filename.length()!=0 ) {
        			p.write(filename);
        			out.print("<h3> 업로드한 파일내임 : "+ filename+"</h3>");
        			out.print("<h3> 파일 size : "+p.getSize()+"</h3>");
        			out.print("<img src='c:/upload/"+filename+"'>");
        			
        		}
        	}
        }
        
	}

}

--------------------UploadServlet2-----------------------------------

package servlet;

import java.util.Collection;
import javax.servlet.ServletException;
import javax.servlet.annotation.MultipartConfig;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.Part;

@WebServlet("/upload2.do")
@MultipartConfig(maxFileSize = 1024*1024*5)
public class UploadServlet2 extends HttpServlet {
	private static final long serialVersionUID = 1L;
       
	protected void doPost(HttpServletRequest request, HttpServletResponse response) 
			                                         throws ServletException, IOException {
		System.out.println("/upload2.do  파일업로드처리");
		response.setContentType("text/html;charset=utf-8");
        request.setCharacterEncoding("utf-8"); 
        
        PrintWriter out  = response.getWriter();

        String name = request.getParameter("name");
        
        String path = request.getRealPath("/upload/");
        System.out.println(path);
        
        Collection<Part> parts = request.getParts();
        for(Part p :parts) {
        	if(p.getContentType() != null) {
        		String filename = p.getSubmittedFileName();
        		if(filename != null && filename.length()!=0 ) {
        			p.write(path+filename);
        			out.print("<h3> 업로드한 파일내임 : "+ filename+"</h3>");
        			out.print("<h3> 파일 size : "+p.getSize()+"</h3>");
        			out.print("<img width=300 height=300 src='./upload/"+filename+"'>");
        		}
        	}
        }
        
	}

}





/upload2.do  파일업로드처리
D:\My_2020\2020_07\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\zzzz4\upload\


